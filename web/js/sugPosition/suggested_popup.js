define(["jquery","knockout","config/config","service","underscore","config/menu","logout","sugPosition/suggested_position"],function(e,t,o,i,n,s,u,d){function a(){var o=this,n=i.getSuggestedPositionDetectResult();o.locationInput=t.observable(),o.detectQuality=t.observable(n.signal_detect_quality),o.detectResult=t.observable(e.i18n.prop("suggested_position_detect_popup_"+n.signal_detect_quality)),o.popupDetectNote=t.observable(e.i18n.prop("suggested_position_detect_popup_detect_note_"+n.signal_detect_quality));var s=i.getSuggestedPositionDetectRecord(),u=0;for(var a in s)void 0!==s[a]&&""!=s[a]&&u++;o.addRecord=function(){e("#suggestedPopupForm").submit()},o.save=function(){if(-1!=o.locationInput().indexOf("($)"))return showAlert("suggested_position_detect_position_invalid"),!1;showLoading();var e=new Date,t={index:u,date:e.getTime(),location:o.locationInput(),quality:o.detectQuality()};i.addSuggestedPositionRecord(t,function(e){"success"==e.result?(successOverlay(),c(),d.updateRecords()):errorOverlay()})},o.discard=function(){e.modal.close()}}function c(){var o=e("#htmlContainer")[0];t.cleanNode(o);var i=new a;t.applyBindings(i,o),e("#suggestedPopupForm").validate({submitHandler:function(){i.save()}})}return{init:c}});
//# sourceMappingURL=../../sourcemaps/sugPosition/suggested_popup.js.map
