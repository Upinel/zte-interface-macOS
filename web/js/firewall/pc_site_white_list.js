define(["jquery","knockout","config/config","service","underscore"],function(e,t,i,n,o){function c(){function i(e){showConfirm("confirm_data_delete",function(){showLoading(),n.removeSiteWhite({ids:e},function(e){c.fetchSiteWhiteList(function(){successOverlay()})},function(e){c.fetchSiteWhiteList(function(){errorOverlay()})})})}var c=this;c.siteList=t.observable([]),c.selectedIds=t.observableArray([]),c.disableAdd=t.computed(function(){return c.siteList().length==h}),showLoading(),c.currentUserInChildGroup=t.observable(n.checkCurrentUserInChildGroup().result),c.fetchSiteWhiteList=function(e){n.getSiteWhiteList({},function(t){c.selectedIds([]),c.siteList(t.siteList),o.isFunction(e)&&e.apply(this)},function(){c.siteList([]),o.isFunction(e)&&e.apply(this)})},t.computed(function(){c.siteList(),c.selectedIds(),setTimeout(function(){renderCheckbox()},100),e("#pc_site_white_list_form").translate()}),c.fetchSiteWhiteList(function(){hideLoading()}),c.checkboxClickHandler=function(e,t){addTimeout(function(){c.selectedIds(s())},100)},c.openAddSitePopoverHandler=function(){var t=e("#addNewSiteTmpl").html();popover.open({target:e("#openAddSiteBtn"),html:t,width:"300px",validation:f})},c.removeWhiteSite=function(e,t){i([e.id])},c.removeSelectedWhiteSite=function(){i(s())},c.removeAllWhiteSite=function(){i(r())},c.saveSiteWhite=function(e,t){if(popover.hide(),o.find(c.siteList(),function(e){return e.site==t}))return showAlert("pc_link_exist",function(){setTimeout(function(){popover.show()},200)}),!1;showLoading(),n.saveSiteWhite({name:e,site:t},function(){c.fetchSiteWhiteList(function(){popover.close(),successOverlay()})},function(){c.fetchSiteWhiteList(function(){errorOverlay(),popover.show()})})}}function s(){return u(!0)}function r(){return u(!1)}function u(t){var i=[];return e(":checkbox"+(t?":checked":""),"#pb_white_list").each(function(e,t){i.push(t.value)}),i}function f(){e("#whiteSiteAddForm").validate({submitHandler:function(){var t=e("#siteName").val(),i=e("#siteLink").val();a.saveSiteWhite(t,i)}})}function d(){var i=e("#container");t.cleanNode(i[0]),a=new c,t.applyBindings(a,i[0])}var h=10,a=null;return{init:d}});
//# sourceMappingURL=../../sourcemaps/firewall/pc_site_white_list.js.map
