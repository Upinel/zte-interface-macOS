define(["jquery","knockout","config/config","service","underscore"],function(e,r,l,t,i){function a(){var i=this,a=t.getUrlFilterList(),d=[{columnType:"checkbox",rowText:"index",width:"30%"},{headerTextTrans:"URL",rowText:"url",width:"70%"}];i.rules=r.observableArray(a.urlFilterRules),i.gridTemplate=new r.simpleGrid.viewModel({data:i.rules(),idName:"index",columns:d,tmplType:"list",pageSize:10}),i.clear=function(){e("#addURLFilter").val("")},i.callback=function(r){"success"==r.result?(i.clear(),n(),successOverlay(),e("#urlFilters").translate()):errorOverlay()},i.addRule=function(){if(i.rules().length>=l.urlFilterMax)return showAlert({msg:"url_filter_max",params:l.urlFilterMax}),!1;for(var r=[],a=0;a<i.rules().length;a++)r.push(i.rules()[a].url);if(-1!=e.inArray(e("#addURLFilter").val(),r))return showAlert("url_repeated"),!1;showLoading();var n={goformId:"URL_FILTER_ADD",addURLFilter:e("#addURLFilter").val()};t.addUrlFilterRule(n,i.callback)},i.deleteRule=function(){showConfirm("confirm_data_delete",function(){showLoading();var e={goformId:"URL_FILTER_DELETE",url_filter_delete_id:i.gridTemplate.selectedIds().join(";")+";"};t.deleteSelectedRules(e,i.callback)})}}function n(){var l=e("#container");r.cleanNode(l[0]);var t=new a;r.applyBindings(t,l[0]),e("#urlFilterForm").validate({submitHandler:function(){t.addRule()},rules:{addURLFilter:"url_filter_check"}}),e("#urlFilterListForm").validate({submitHandler:function(){t.deleteRule()}})}return{init:n}});
//# sourceMappingURL=../../sourcemaps/firewall/url_filter.js.map
