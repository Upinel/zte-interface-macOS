define(["jquery","knockout","config/config","service","underscore"],function(t,e,i,n,r){function o(){var i=this;c(),i.notSave=e.observable(!1),i.currentUserInChildGroup=e.observable(n.checkCurrentUserInChildGroup().result),i.fetchTimeLimited=function(){n.getTimeLimited({},function(e){for(var i in e)for(var n=0;n<e[i].length;n++){var r="td_"+i+"_"+e[i][n];t("#"+r).addClass("active")}},function(){})},i.fetchTimeLimited(),i.saveTimeLimitedHandler=function(){showLoading();var t=a(),e=d(t);n.saveTimeLimited({time:e},function(){i.notSave(!1),successOverlay()},function(){errorOverlay()})},i.bindEvent=function(){t("td:not('.col-head')","#pc_time_limited_tbody").addClass("cursorhand").die().click(function(){i.notSave(!0),t(this).toggleClass("active")}).hover(function(){var e=t(this),i=e.data("week"),n=e.data("hour");t("tr:nth-child("+(i+1)+") td:first-child","#pc_time_limited_tbody").addClass("time_td_hover"),t("#col_"+n).addClass("time_td_hover"),e.not(".active")&&e.addClass("time_td_hover")},function(){var e=t(this),i=e.data("week"),n=e.data("hour");t("tr:nth-child("+(i+1)+") td:first-child","#pc_time_limited_tbody").removeClass("time_td_hover"),t("#col_"+n).removeClass("time_td_hover"),e.removeClass("time_td_hover")})},i.currentUserInChildGroup()||i.bindEvent()}function a(){var e={0:[],1:[],2:[],3:[],4:[],5:[],6:[]};return t("td.active","#pc_time_limited_tbody").each(function(i,n){var r=t(n),o=r.data("week"),a=r.data("hour");e[o].push(a)}),e}function d(t){var e="";for(var i in t){var n=r.sortBy(t[i],function(t){return t});t[i].length&&(e+=i+"+",e+=n.join(","),e+=";")}return e.substring(0,e.length-1)}function c(){t("tr","#pc_time_limited_tbody").each(function(e,i){var n=t(i);t("td:not(:first)",n).each(function(i,n){var r=t(n),o=s(i);r.attr({id:"td_"+e+"_"+o}).data({week:e,hour:o})})}),t("thead td:not(:first)","#pc_time_limited_form").each(function(e,i){var n=s(e);t(i).attr({id:"col_"+n})})}function s(t){return t>16?t-17:t+7}function u(){var i=t("#container");e.cleanNode(i[0]);var n=new o;e.applyBindings(n,i[0])}return{init:u}});
//# sourceMappingURL=../../sourcemaps/firewall/pc_time_limited.js.map
