define(["jquery","knockout","config/config","service","underscore"],function(e,n,a,r,c){function s(){var a=this,c=i();a.languages=n.observableArray(t),a.selectedLanguage=n.observable(c.language),a.deviceName=n.observable(c.deviceName),a.shareAudio=n.observable(c.shareAudio),a.shareImage=n.observable(c.shareImage),a.shareVideo=n.observable(c.shareVideo),a.isScanTrans=n.observable(),a.needRescan=n.observable(c.needRescan),a.dlnaEnable=n.observable(c.dlnaEnable),a.onScanning=n.observable(!1);var s="";"0"==c.dlna_scan?(s="scanning",a.onScanning(!0)):"1"==c.dlna_scan?c.needRescan?(s="need_rescan",a.onScanning(!0)):(s="scanned",a.onScanning(!0)):a.onScanning(!1),a.isScanTrans(e.i18n.prop(s)),function(){var n=0,c="",s=setInterval(function(){n++;var i=r.getDlnaSetting();"0"==i.dlna_scan?(c="scanning",a.onScanning(!0)):"1"==i.dlna_scan?i.needRescan?(c="need_rescan",a.onScanning(!0)):(c="scanned",a.onScanning(!0)):a.onScanning(!1),a.isScanTrans(e.i18n.prop(c)),n>=1200&&clearInterval(s)},1e3)}(),a.setShareAudio=function(){var n=e("#shareAudio:checked");n&&0==n.length?a.shareAudio("on"):a.shareAudio("off")},a.setShareImage=function(){var n=e("#shareImage:checked");n&&0==n.length?a.shareImage("on"):a.shareImage("off")},a.setShareVideo=function(){var n=e("#shareVideo:checked");n&&0==n.length?a.shareVideo("on"):a.shareVideo("off")},a.nameMaxLength=n.computed(function(){return"UNICODE"==getEncodeType(a.deviceName()).encodeType?16:32});var l=e(".checkboxToggle");a.dlnaEnable()||(e("#frmDlna input").each(function(){e(this).attr("disabled",!0)}),disableCheckbox(l)),a.save=function(){a.isScanTrans(e.i18n.prop("scanning")),a.onScanning(!0);var n={};n.language=a.selectedLanguage(),n.deviceName=a.deviceName(),n.shareAudio=a.shareAudio(),n.shareImage=a.shareImage(),n.shareVideo=a.shareVideo(),r.setDlnaSetting(n,function(e){"success"==e.result?(a.clear(),successOverlay()):errorOverlay()})},a.rescan=function(){a.isScanTrans(e.i18n.prop("scanning")),a.onScanning(!0);var n={};r.rescanDlna(n,function(e){"success"==e.result?(a.clear(),successOverlay()):errorOverlay()})},a.clear=function(){o()}}function i(){return r.getDlnaSetting()}function o(){var a=e("#container");n.cleanNode(a[0]);var r=new s;n.applyBindings(r,a[0]),e("#frmDlna").validate({submitHandler:function(){r.save()},rules:{txtDeviceName:"dlna_name_check"}})}var t=c.map(a.DLNA_LANGUAGES,function(e){return new Option(e.name,e.value)});return{init:o}});
//# sourceMappingURL=../../sourcemaps/adm/dlna.js.map
