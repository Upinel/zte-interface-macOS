define(["jquery","knockout","config/config","service","underscore"],function(e,t,i,a,n){function r(){var e=this,i=a.getUpgradeUrlSetting();e.fota_download_url=t.observable(i.fota_download_url),e.dm_install_time=t.observable(i.dm_install_time),e.startTime=t.observable(0),e.endTime=t.observable(1),void 0!==i.dm_install_time&&""!=i.dm_install_time&&(e.startTime(i.dm_install_time.split("-")[0]),e.endTime(i.dm_install_time.split("-")[1])),e.save=function(){showLoading();var t={};t.fota_download_url=e.fota_download_url(),t.dm_install_time=e.startTime()+"-"+e.endTime(),a.setUpgradeUrl(t,function(e){"success"==e.result?successOverlay():errorOverlay()})}}function o(){var i=e("#container");t.cleanNode(i[0]);var a=new r;t.applyBindings(a,i[0]),e("#updateUrlSettingForm").validate({submitHandler:function(){a.save()},rules:{txtfotadownUrl:"fota_down_url",startTime:{digits:!0,timeCompare:"#endTime"},endTime:{digits:!0,timeCompare:"#startTime"}},errorPlacement:function(t,i){"startTime"==i.attr("name")||"endTime"==i.attr("name")?e("#openErrorDiv").html(t):t.insertAfter(i)}}),e.validator.addMethod("timeCompare",function(t,i,a){return""==e("#startTime").val()&&""==e("#endTime").val()||parseInt(e("#startTime").val())<=parseInt(e("#endTime").val())}),e.validator.addMethod("fota_down_url",function(e,t,i){var a=new RegExp("^((ftp|FTP)://)S*");return this.optional(t)||a.test(e)&&-1==e.indexOf('"')&&-1==e.indexOf("\\")})}return{init:o}});
//# sourceMappingURL=../../sourcemaps/adm/upgrade_url.js.map
