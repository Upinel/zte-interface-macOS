define(["jquery","knockout","config/config","service","underscore"],function(a,e,n,d,t){function f(){var a=this,n=s();a.types=e.observable(r),a.selectedType=e.observable(n.tunnel_type),a.ipv4v6_address=e.observable(n.ipv4_address||n.ipv6_address),a.port=e.observable(n.port),a.access_type=e.observable(n.access_type),a.vni=e.observable(n.vni),a.vxlan_enable=e.observable(n.vxlan_enable),a.vxlan_auth_enable=e.observable(n.vxlan_auth_enable),a.save=function(){showLoading();var e={};e.vxlan_enable=a.vxlan_enable(),e.vxlan_auth_enable=a.vxlan_auth_enable(),"ipv4"==v(a.ipv4v6_address())?e.vxlan_config=a.selectedType()+","+a.ipv4v6_address()+",,"+a.port()+","+a.access_type()+","+a.vni():"ipv6"==v(a.ipv4v6_address())?e.vxlan_config=a.selectedType()+",,"+a.ipv4v6_address()+","+a.port()+","+a.access_type()+","+a.vni():e.vxlan_config=a.selectedType()+",,,"+a.port()+","+a.access_type()+","+a.vni(),d.setVxlanTunnelSetting(e,function(a){"success"==a.result?successOverlay():errorOverlay()})}}function s(){return d.getVxlanTunnelSetting()}function v(a){var e=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/i,n=/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i;return e.test(a)?"ipv4":!!n.test(a)&&"ipv6"}function i(){var n=a("#container");e.cleanNode(n[0]);var d=new f;e.applyBindings(d,n[0]),a("#vxlanTunnelForm").validate({submitHandler:function(){d.save()},rules:{txtIpAddress:"ipv4_ipv6",txtPort:{digits:!0,range:[1,65535]},txtVNI:{digits:!0,range:[1,16777216]}}}),a.validator.addMethod("ipv4_ipv6",function(a,e,n){return this.optional(e)||/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/i.test(a)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(a)},"Please enter a valid IPv4 or IPv6 address.")}var r=t.map(n.vxlanTunnel_TYPE_MODES,function(a){return new Option(a.name,a.value)});return{init:i}});
//# sourceMappingURL=../../sourcemaps/adm/vxlan_tunnel.js.map
