define(["jquery","knockout","config/config","service","underscore","lib/jquery/jQuery.fileinput"],function(e,r,t,s,n,o){function a(){0==e(".customfile").length&&e("#fileField").customFileInput();var t=this,n=s.getTR069Config();t.requestUrl=r.observable("");var o=s.getConnectionInfo();n.connectStatus=o.connectStatus,checkConnectedStatus(n.connectStatus)&&t.requestUrl(n.tr069_ReqURL),setInterval(function(){var e=s.getConnectionInfo();n.connectStatus=e.connectStatus,checkConnectedStatus(n.connectStatus)&&t.requestUrl(n.tr069_ReqURL)},1e3),t.tr069_Webui_DataModuleSupport=r.observable(n.tr069_Webui_DataModuleSupport),t.tr069_DataModule=r.observable(n.tr069_DataModule),t.serverUrl=r.observable(n.serverUrl),t.serverUserName=r.observable(n.serverUserName),t.serverPassword=r.observable(n.serverPassword),t.requestUserName=r.observable(n.requestUserName),t.requestPassword=r.observable(n.requestPassword),t.informSetting=r.observable(n.tr069_PeriodicInformEnable),t.informInterval=r.observable(n.tr069_PeriodicInformInterval),t.certificateSetting=r.observable(n.tr069_CertEnable),t.apply=function(){s.setTR069Configuration({goformId:"setTR069Config",serverURL:t.serverUrl(),serverusername:t.serverUserName(),serveruserpassword:t.serverPassword(),tr069_CPEPortNo:n.tr069_CPEPortNo,connrequestname:t.requestUserName(),connrequestpassword:t.requestPassword(),tr069_PeriodicInformEnable:t.informSetting(),tr069_PeriodicInformInterval:t.informInterval(),tr069_CertEnable:t.certificateSetting()},function(e){"success"==e.result?(successOverlay(),c()):errorOverlay()})},t.tr069ModuleSwtich=function(){showLoading();var e={};e.tr069_DataModule=t.tr069_DataModule(),s.setTr069Module(e,function(e){"success"==e.result?successOverlay():errorOverlay()})}}function c(){var t=e("#container");r.cleanNode(t[0]);var s=new a;r.applyBindings(s,t[0]),e("#tr069Form").validate({submitHandler:function(){s.apply()},rules:{serverusername:"tr069_name_check",serveruserpassword:"tr069_password_check",connrequestname:"tr069_name_check",connrequestpassword:"tr069_password_check",txtInformInterval:{digits:!0,range:[1,4294967295]}}}),e("#tr069ModuleForm").validate({submitHandler:function(){s.tr069ModuleSwtich()}})}return certificateUploadSubmitClickHandler=function(){var r=e(".customfile span.customfile-feedback").text();return r!=e.i18n.prop("no_file_selected")&&("ca-cert.crt"!=r?(showAlert("certificate_file_nomatch"),!1):(e("#certificateUploadIframe").load(function(){-1!=e("#certificateUploadIframe").contents().find("body").html().toLowerCase().indexOf("success")?successOverlay():errorOverlay(),e("#uploadBtn").attr("data-trans","browse_btn"),e("#uploadBtn").html(e.i18n.prop("browse_btn")),e(".customfile span.customfile-feedback").text("")}),void document.getElementById("UploadCertificate").submit()))},{init:c}});
//# sourceMappingURL=../../sourcemaps/adm/tr069config.js.map
