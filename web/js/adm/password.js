define(["jquery","knockout","config/config","service","underscore"],function(s,r,t,e,o){function a(){var t=this;t.showLoginPassword=r.observable(!1),t.showLoginPasswordHandler=function(){s("#txtCurrentPasswordShow").parent().find(".error").hide(),s("#txtNewPasswordShow").parent().find(".error").hide(),s("#txtConfirmPasswordShow").parent().find(".error").hide();var r=s("#showLoginPassword:checked");r&&0==r.length?t.showLoginPassword(!0):t.showLoginPassword(!1)},t.currentPassword=r.observable(),t.newPassword=r.observable(),t.confirmPassword=r.observable(),t.changePassword=function(){var r={oldPassword:t.currentPassword(),newPassword:t.newPassword()};showLoading(),e.changePassword(r,function(r){t.cancel(),r&&1==r.result?successOverlay():r&&"badPassword"==r.errorType?(hideLoading(),showAlert("current_password_error",function(){t.showLoginPassword()?s("#txtCurrentPasswordShow").focus():s("#txtCurrentPassword").focus()})):errorOverlay()})},t.cancel=function(){t.currentPassword(""),t.newPassword(""),t.confirmPassword("")}}function n(s,r){this.start(r);var t=this;document.getElementById(s).onkeyup=function(){t.checkStrength(this.value,r)}}function d(){var t=new a;r.applyBindings(t,s("#container")[0]),s("#frmPassword").validate({submitHandler:function(){t.changePassword()},rules:{txtCurrentPassword:"password_check",txtNewPassword:"password_check",txtConfirmPassword:{equalToPassword:"#txtNewPassword"},txtCurrentPasswordShow:"password_check",txtNewPasswordShow:"password_check",txtConfirmPasswordShow:{equalToPassword:"#txtNewPasswordShow"}}}),s("#passStrength").removeClass().addClass("passStrength0"),n("txtNewPassword","passStrength"),n("txtNewPasswordShow","passStrength")}return start=function(s){var r=document.getElementById(s),t=document.createElement("div"),e=document.createElement("strong");this.oStrength=r.appendChild(t),this.oStrengthTxt=r.parentNode.appendChild(e)},checkStrength=function(r,t){var e=0;r.match(/[a-z]/g)&&e++,r.match(/[0-9]/g)&&e++,r.match(/[A-Z]/g)&&e++,r.match(/[^A-Za-z0-9]/g)&&e++,r.length<5&&(e=0),e>3&&(e=3),document.getElementById(t).className="passStrength"+e,e>=0?s("#"+t).removeAttr("data-trans").attr("data-trans","password_strength_"+e).translate():s("#"+t).removeAttr("data-trans").html("password_strength_0")},{init:d}});
//# sourceMappingURL=../../sourcemaps/adm/password.js.map
