define(["jquery","knockout","config/config","service","underscore"],function(e,i,s,_,t){function n(){var t=this,n=r(),S=_.getParams({nv:"wifi_onoff_wifi5g_by_n79_mutex"}).wifi_onoff_wifi5g_by_n79_mutex;t.wpsType_Main=i.observable(""),t.wpsPin_Main=i.observable(""),t.wpsFlag_Chip1=i.observable(n.WpsStatus_1),t.wpsType_Guest=i.observable(""),t.wpsPin_Guest=i.observable(""),t.wpsFlag_Chip2=i.observable(n.WpsStatus_2),t.authMode_Chip1=i.observable(n.AuthMode_1_1),t.hasMultiSSID=s.HAS_MULTI_SSID,t.hasWifiMacFilter=s.WIFI_MAC_FILTER_SUPPORT,t.mulOption_Main=i.observable(c(n,S)),t.wpsSSID_Main=i.observable(a(n)),t.mulOption_Guest=i.observable(p(n)),t.wpsSSID_Guest=i.observable(u(n));var P=_.getWifiModuleSwitchStatus();t.hasWifiSwitch=s.WIFI_SWITCH_SUPPORT,t.hasGuestSSIDControl=s.WIFI_GUEST_SSID_ACCESS_SUPPORT,t.hasWifiDoubleChip=s.WIFI_DOUBLE_CHIP,t.hasMultiSSID=s.HAS_MULTI_SSID,t.wifi_enable=i.observable(P.WiFiModuleSwitch),t.isShowSSIDInfoDiv=i.observable(!1);var h=_.getParams({nv:"lan_sec_ssid_control"}).lan_sec_ssid_control;t.lan_sec_ssid_control=i.observable(h),s.WIFI_SWITCH_SUPPORT?"0"!=P.WiFiModuleSwitch?t.isShowSSIDInfoDiv(!0):t.isShowSSIDInfoDiv(!1):t.isShowSSIDInfoDiv(!0),t.origin_main_ssid_enable=P.WiFiModuleSwitch,t.ssid_chip1_enable=i.observable(!1),"1"==P.WiFiModuleSwitch&&"1"==n.AccessPointSwitchStatus_1_1?t.ssid_chip1_enable(!0):t.ssid_chip1_enable(!1),t.ssid_chip2_enable=i.observable(!1),"1"==P.WiFiModuleSwitch&&"1"==n.AccessPointSwitchStatus_1_2?t.ssid_chip2_enable(!0):t.ssid_chip2_enable(!1),t.save=function(){var e=r();if("0"==_.getWifiModuleSwitchStatus().WiFiModuleSwitch)return void showAlert("wps_wifi_off");if("SSID1"==t.wpsSSID_Main()&&"1"==e.WpsStatus_1)return showAlert("wps_on_info"),!0;if("SSID2"==t.wpsSSID_Main()&&"1"==e.WpsStatus_2)return showAlert("wps_on_info"),!0;if("SSID1"==t.wpsSSID_Main()){if("OPEN"==e.AuthMode_1_1&&"WEP"==e.EncrypType_1_1||"SHARED"==e.AuthMode_1_1&&"WEP"==e.EncrypType_1_1||"WPAPSK"==e.AuthMode_1_1&&"TKIP"==e.EncrypType_1_1||"WPAPSK"==e.AuthMode_1_1&&"AES"==e.EncrypType_1_1||"WPAPSK"==e.AuthMode_1_1&&"TKIPCCMP"==e.EncrypType_1_1||"WPA2PSK"==e.AuthMode_1_1&&"TKIP"==e.EncrypType_1_1||"WPAPSKWPA2PSK"==e.AuthMode_1_1&&"TKIP"==e.EncrypType_1_1)return void showAlert("wps_auth_open")}else{if("OPEN"==e.AuthMode_2_1&&"WEP"==e.EncrypType_2_1||"SHARED"==e.AuthMode_2_1&&"WEP"==e.EncrypType_2_1||"WPAPSK"==e.AuthMode_2_1&&"TKIP"==e.EncrypType_2_1||"WPAPSK"==e.AuthMode_2_1&&"AES"==e.EncrypType_2_1||"WPAPSK"==e.AuthMode_2_1&&"TKIPCCMP"==e.EncrypType_2_1||"WPA2PSK"==e.AuthMode_2_1&&"TKIP"==e.EncrypType_2_1||"WPAPSKWPA2PSK"==e.AuthMode_2_1&&"TKIP"==e.EncrypType_2_1)return void showAlert("wps_auth_open")}var i;if(0==(i="SSID1"==t.wpsSSID_Main()?0:1)){if("1"==e.ApBroadcastDisabled_1_1)return void showAlert("wps_ssid_broadcast_disable")}else if(1==i&&"1"==e.ApBroadcastDisabled_2_1)return void showAlert("wps_ssid_broadcast_disable");showLoading();var s={};s.ChipIndex=i,s.WpsMode=t.wpsType_Main(),s.WpsPin=o(t.wpsPin_Main()),s.ActiveWpsAccessPointIndex="0",_.setWifiWpsStart(s,function(e){"success"==e.result?(t.wpsPin_Main(""),clearValidateMsg(),successOverlay()):errorOverlay()})},t.save_guest=function(){var e=r();if("0"==e.WiFiModuleSwitch)return void showAlert("wps_wifi_off");if("1"==e.WpsStatus_1)return showAlert("wps_on_info"),!0;if("SSID1"==t.wpsSSID_Guest()){if("OPEN"==e.AuthMode_1_2&&"WEP"==e.EncrypType_1_2||"SHARED"==e.AuthMode_1_2&&"WEP"==e.EncrypType_1_2||"WPAPSK"==e.AuthMode_1_2&&"TKIP"==e.EncrypType_1_2||"WPAPSK"==e.AuthMode_1_2&&"AES"==e.EncrypType_1_2||"WPAPSK"==e.AuthMode_1_2&&"TKIPCCMP"==e.EncrypType_1_2||"WPA2PSK"==e.AuthMode_1_2&&"TKIP"==e.EncrypType_1_2||"WPAPSKWPA2PSK"==e.AuthMode_1_2&&"TKIP"==e.EncrypType_1_2)return void showAlert("wps_auth_open")}else{if("OPEN"==e.AuthMode_2_2&&"WEP"==e.EncrypType_2_2||"SHARED"==e.AuthMode_2_2&&"WEP"==e.EncrypType_2_2||"WPAPSK"==e.AuthMode_2_2&&"TKIP"==e.EncrypType_2_2||"WPAPSK"==e.AuthMode_2_2&&"AES"==e.EncrypType_2_2||"WPAPSK"==e.AuthMode_2_2&&"TKIPCCMP"==e.EncrypType_2_2||"WPA2PSK"==e.AuthMode_2_2&&"TKIP"==e.EncrypType_2_2||"WPAPSKWPA2PSK"==e.AuthMode_2_2&&"TKIP"==e.EncrypType_2_2)return void showAlert("wps_auth_open")}var i;if(0==(i="SSID1"==t.wpsSSID_Guest()?0:1)){if("1"==e.ApBroadcastDisabled_1_2)return void showAlert("wps_ssid_broadcast_disable")}else if(1==i&&"1"==e.ApBroadcastDisabled_2_2)return void showAlert("wps_ssid_broadcast_disable");showLoading();var s={};s.ChipIndex=i,s.WpsMode=t.wpsType_Guest(),s.WpsPin=o(t.wpsPin_Guest()),s.ActiveWpsAccessPointIndex="1",_.setWifiWpsStart(s,function(e){"success"==e.result?(t.wpsPin_Guest(""),clearValidateMsg(),successOverlay()):errorOverlay()})},"1"==n.WpsStatus_1?t.wpsType_Main("PIN"==n.WpsMode_1?"PIN":"PBC"):t.wpsType_Main(""),"1"==n.WpsStatus_2?t.wpsType_Guest("PIN"==n.WpsMode_2?"PIN":"PBC"):t.wpsType_Guest(""),t.setMultiSSIDSwitch=function(){if(!t.checkSettings()){var i=function(){showLoading();var i={};s.WIFI_SWITCH_SUPPORT&&(i.SwitchOption=t.wifi_enable(),t.lan_sec_ssid_control(e("#allowAccessCheckbox:checked").length>0?"0":"1"),i.lan_sec_ssid_control=t.lan_sec_ssid_control()),_.setWifiModuleSwitchStatus(i,function(e){"success"==e.result?t.checkWifiStatus():errorOverlay()})};"0"==t.wifi_enable()?showConfirm("wifi_off_alert",function(){i()}):i()}},t.checkWifiStatus=function(){function e(){var i=_.getWifiModuleSwitchStatus();"0"!=i.WiFiModuleSwitch&&"1"!=i.WiFiModuleSwitch?addTimeout(e,1e3):setTimeout(function(){successOverlay(),l&&setTimeout(function(){window.location.reload()},1e3),clearTimer(),clearValidateMsg(),d()},l?15e3:0)}setTimeout(function(){e()},2e3)},t.checkSettings=function(){var e=r();return("1"==e.WpsStatus_1||"1"==e.WpsStatus_2)&&(showAlert("wps_on_info"),!0)}}function o(e){return 9==e.length?e.substring(0,4)+e.substring(5):e}function r(){var e=_.getWifiWpsStatus(),i=_.getWifiAccessPointInfo();return wifiFilterWPSInfo(e,i)}function a(e){return"0"==e.ActiveWpsAccessPointIndex_2?"SSID2":"SSID1"}function u(e){return"1"==e.ActiveWpsAccessPointIndex_2?"SSID2":"SSID1"}function c(e,i){var s=[];return s.push(new Option(e.ssid_1_1,"SSID1")),"1"!=i&&s.push(new Option(e.multiSSID_2_1,"SSID2")),s}function p(e){var i=[];return"1"==e.AccessPointSwitchStatus_1_2&&i.push(new Option(e.ssid_1_2,"SSID1")),i}function S(){_.getParams({nv:"user_ip_addr"},function(e){_.getParams({nv:"station_list"},function(i){l=isWifiConnected(e.user_ip_addr,i.station_list)})})}function d(){var s=e("#container");i.cleanNode(s[0]);var _=new n;i.applyBindings(_,s[0]),addTimeout(function(){S()},600),e("#frmWifiSwitch").validate({submitHandler:function(){_.setMultiSSIDSwitch()}}),e("#wpsFormMain").validate({submitHandler:function(){_.save()},rules:{txtPin:{wps_pin_validator:!0}}}),e("#wpsFormGuest").validate({submitHandler:function(){_.save_guest()},rules:{txtPin_Chip2:{wps_pin_validator:!0}}})}var l=!1;return{init:d}});
//# sourceMappingURL=../../sourcemaps/wifi/wps.js.map
