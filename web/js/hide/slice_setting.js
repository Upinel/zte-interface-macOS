define(["jquery","knockout","config/config","service","underscore"],function(t,e,r,s,_){function o(){var t=this,r=s.getSliceSetting();if(t.pdpTypes=e.observableArray(a()),t.authModes=e.observableArray(n()),void 0===r.multi_vlan_pdns_map_tmp||""==r.multi_vlan_pdns_map_tmp)var _="";else var _=r.multi_vlan_pdns_map_tmp.split(";");if(t.vlan_id_2=e.observable(""),t.ori_vlan_id_2="",t.vlan_id_2_status=e.observable("1"),t.vlan_id_3=e.observable(""),t.ori_vlan_id_3="",t.vlan_id_3_status=e.observable("1"),""==_)t.vlan_id_2("");else for(var o=0;o<_.length;o++){var i=_[o].split(",");"slice3"==i[1]?(t.vlan_id_2(i[0]),t.ori_vlan_id_2=i[0],t.vlan_id_2_status(i[2])):"slice4"==i[1]&&(t.vlan_id_3(i[0]),t.ori_vlan_id_3=i[0],t.vlan_id_3_status(i[2]))}var l=d(r.MP_APN_config3);t.apn_2=e.observable(l.apn),t.selectedPdpType_2=e.observable(l.pdpType),t.selectedAuthentication_2=e.observable(l.authType),t.username_2=e.observable(l.userName),t.password_2=e.observable(l.passWord);var c=p(r.multi_vlan_pdns_map_ip_rule_3_1);t.sourceIpAddress_2=e.observable(c.sourceIp),t.destIpAddress_2=e.observable(c.destIp),t.sourcePortStart_2=e.observable(c.sourcePortStart),t.sourcePortEnd_2=e.observable(c.sourcePortEnd),t.destPortStart_2=e.observable(c.destPortStart),t.destPortEnd_2=e.observable(c.destPortEnd),t.protocol_2=e.observable(c.mapProtocol),t.pdnSwitchSetting_2=e.observable(r.nssai_pdn3_switch),t.ipAddr_2=e.observable(r.multi_pdns_wan_ipaddr_3),t.ipv6Addr_2=e.observable(r.multi_pdns_ipv6_wan_ipaddr_3);var u=d(r.MP_APN_config4);t.apn_3=e.observable(u.apn),t.selectedPdpType_3=e.observable(u.pdpType),t.selectedAuthentication_3=e.observable(u.authType),t.username_3=e.observable(u.userName),t.password_3=e.observable(u.passWord);var v=p(r.multi_vlan_pdns_map_ip_rule_4_1);t.sourceIpAddress_3=e.observable(v.sourceIp),t.destIpAddress_3=e.observable(v.destIp),t.sourcePortStart_3=e.observable(v.sourcePortStart),t.sourcePortEnd_3=e.observable(v.sourcePortEnd),t.destPortStart_3=e.observable(v.destPortStart),t.destPortEnd_3=e.observable(v.destPortEnd),t.protocol_3=e.observable(v.mapProtocol),t.pdnSwitchSetting_3=e.observable(r.nssai_pdn4_switch),t.ipAddr_3=e.observable(r.multi_pdns_wan_ipaddr_4),t.ipv6Addr_3=e.observable(r.multi_pdns_ipv6_wan_ipaddr_4),t.save=function(e){showLoading();var r={};r.cid=e,"3"==e?(r.MP_APN_config=t.apn_2()+"($)"+t.selectedPdpType_2()+"($)"+t.selectedAuthentication_2()+"($)"+t.username_2()+"($)"+t.password_2()+"($)",r.multi_vlan_pdns_map_tmp=t.vlan_id_2()+",slice3,"+t.vlan_id_2_status()+";"+t.ori_vlan_id_3+",slice4,"+t.vlan_id_3_status(),r.multi_vlan_pdns_map_ip_rule=t.sourceIpAddress_2()+","+t.destIpAddress_2()+","+t.sourcePortStart_2()+":"+t.sourcePortEnd_2()+","+t.destPortStart_2()+":"+t.destPortEnd_2()+","+t.protocol_2()+";",r.nssai_pdn_switch=t.pdnSwitchSetting_2()):(r.MP_APN_config=t.apn_3()+"($)"+t.selectedPdpType_3()+"($)"+t.selectedAuthentication_3()+"($)"+t.username_3()+"($)"+t.password_3()+"($)",r.multi_vlan_pdns_map_tmp=t.ori_vlan_id_2+",slice3,"+t.vlan_id_2_status()+";"+t.vlan_id_3()+",slice4,"+t.vlan_id_3_status(),r.multi_vlan_pdns_map_ip_rule=t.sourceIpAddress_3()+","+t.destIpAddress_3()+","+t.sourcePortStart_3()+":"+t.sourcePortEnd_3()+","+t.destPortStart_3()+":"+t.destPortEnd_3()+","+t.protocol_3()+";",r.nssai_pdn_switch=t.pdnSwitchSetting_3()),s.setSliceSetting(r,function(t){"success"==t.result?successOverlay():errorOverlay()})}}function a(){var t=[new Option("IPv4","IP")];return r.IPV6_SUPPORT&&(t.push(new Option("IPv6","IPv6")),r.IPV4V6_SUPPORT&&t.push(new Option("IPv4v6","IPv4v6")),r.IPV4_AND_V6_SUPPORT&&t.push(new Option("IPv4 & IPv6","IPv4v6"))),t}function n(){return _.map(r.APN_AUTH_MODES_SLICE,function(t){return new Option(t.name,t.value)})}function d(t){var e=t.split("($)"),r=[];return r.apn=e[0],r.pdpType=e[1],r.authType=e[2],r.userName=e[3],r.passWord=e[4],r}function p(t){var e=[];if(e.sourceIp="",e.destIp="",e.sourcePortStart="",e.sourcePortEnd="",e.destPortStart="",e.destPortEnd="",void 0!==t&&""!=t){t=t.substring(0,t.length-1);var r=t.split(",");e.sourceIp=r[0],e.destIp=r[1],""!=r[2]&&(e.sourcePortStart=r[2].split(":")[0],e.sourcePortEnd=r[2].split(":")[1]),""!=r[3]&&(e.destPortStart=r[3].split(":")[0],e.destPortEnd=r[3].split(":")[1]),e.mapProtocol=r[4]}return e}function i(){var r=t("#container");e.cleanNode(r[0]);var s=new o;e.applyBindings(s,r[0]),t("#slice2Form").validate({submitHandler:function(){s.save("3")},rules:{apn_2:"apn_check",apn_user_name_2:"ppp_username_check",apn_password_2:"ppp_password_check",txtSourceIpAddress_2:{ip_check:!0},txtDestIpAddress_2:{ip_check:!0},txtDestPortStart_2:{digits:!0,range:[1,65535],slice_portCompare:"#txtDestPortEnd_2"},txtDestPortEnd_2:{digits:!0,range:[1,65535],slice_portCompare:"#txtDestPortStart_2"},txtSourcePortStart_2:{digits:!0,range:[1,65535],slice_portCompare:"#txtSourcePortEnd_2"},txtSourcePortEnd_2:{digits:!0,range:[1,65535],slice_portCompare:"#txtSourcePortStart_2"}},groups:{destPort:"txtDestPortStart_2 txtDestPortEnd_2",sourcePort:"txtSourcePortStart_2 txtSourcePortEnd_2"},errorPlacement:function(t,e){"txtDestPortStart_2"==e.attr("name")||"txtDestPortEnd_2"==e.attr("name")?t.appendTo("#destPortErrorDiv_2"):"txtSourcePortStart_2"==e.attr("name")||"txtSourcePortEnd_2"==e.attr("name")?t.appendTo("#sourcePortErrorDiv_2"):t.insertAfter(e)}}),t("#slice3Form").validate({submitHandler:function(){s.save("4")},rules:{apn_3:"apn_check",apn_user_name_3:"ppp_username_check",apn_password_3:"ppp_password_check",txtSourceIpAddress_3:{ip_check:!0},txtDestIpAddress_3:{ip_check:!0},txtDestPortStart_3:{digits:!0,range:[1,65535],slice_portCompare:"#txtDestPortEnd_3"},txtDestPortEnd_3:{digits:!0,range:[1,65535],slice_portCompare:"#txtDestPortStart_3"},txtSourcePortStart_3:{digits:!0,range:[1,65535],slice_portCompare:"#txtSourcePortEnd_3"},txtSourcePortEnd_3:{digits:!0,range:[1,65535],slice_portCompare:"#txtSourcePortStart_3"}},groups:{destPort:"txtDestPortStart_3 txtDestPortEnd_3",sourcePort:"txtSourcePortStart_3 txtSourcePortEnd_3"},errorPlacement:function(t,e){"txtDestPortStart_3"==e.attr("name")||"txtDestPortEnd_3"==e.attr("name")?t.appendTo("#destPortErrorDiv_3"):"txtSourcePortStart_3"==e.attr("name")||"txtSourcePortEnd_3"==e.attr("name")?t.appendTo("#sourcePortErrorDiv_3"):t.insertAfter(e)}}),t.validator.addMethod("slice_portCompare",function(e,r,s){if(""==e||""==t(s).val())return!0;var _=parseInt(e,10),o=parseInt(t(s).val(),10);return-1!=s.indexOf("Start")?o<=_:o>=_})}return{init:i}});
//# sourceMappingURL=../../sourcemaps/hide/slice_setting.js.map
