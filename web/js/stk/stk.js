define(["jquery","service","knockout"],function(n,t,e){function r(){function r(){for(x=[],k=0;k<a[0];k++){i=k+1;var n={};n.main_menu_value=l(s[i]),n.main_num_value=a[i],x.push(n)}}function o(n,t){a[t]=n.substr(0,n.indexOf(",")),u=n.substr(n.indexOf(",")+1),s[t]=n.substr(n.indexOf(",")+1)}function l(n){var t=n.length;return"80"==n.substr(0,2)?c(n.substr(2,t)):m(n)}function c(n){var t="";if(""==n||null==n)return t;for(var e=0;e<n.length;e+=4){var r=n.substring(e,e+4),o=parseInt(r,16);t+=String.fromCharCode(o)}return t}function m(n){for(var t="",e="",r="",o=0;o<n.length;o+=2)t=n.substring(o,o+2),e=parseInt(t,16),r+=String.fromCharCode(e);return r}function g(n){var t=n.length;return"80"==n.substr(2,2)?c(n.substr(4,t-4)+""):m(n.substr(2,t-2)+"")}function d(n){for(var t,e,r=n.toString(),i=0;r&&(t=r.indexOf(";"),e=r.substr(0,t),r=r.substr(t+1),""!=e);)o(e,i),i++}function v(n){var t=n.length;return"#"==n||""==n?"Message Sending":"80"==n.substr(0,2)?c(n.substr(2,t)):m(n)}function h(n){for(var t=0,e=n.toString();e;){var r=e.indexOf(",");if(-1==r){_[t]=e;break}input_str=e.substr(0,r),e=e.substr(r+1),_[t]=input_str,t++}var o=_[0].length;return"80"==_[0].substr(0,2)?(_[0]=_[0].substr(2,o),_[0]=c(_[0]),_[0]):(_[0]=m(_[0]),_[0])}function p(){var n=parseInt(_[2]);document.getElementById("input_content").rows=n>35?"4":"1"}function b(){n("#input_max").html(_[2]),n("#input_min").html(_[3])}function S(){var t=n("#input_content"),e=t.val(),r=parseInt(_[2]/2,10),o=n("#input_max");if(""==e)o.html(_[2]);else{"UNICODE"==I(e)?(o.html(r),e.length>r?(t.val(e.substr(0,r)),alert(n.i18n.prop("input_too_long"))):o.html(r)):(o.html(_[2]),e.length>_[2]?(t.val(e.substr(0,_[2])),alert(n.i18n.prop("input_too_long"))):o.html(_[2]))}}function I(n){var t="ASCII";if(null==n||""==n)return t;for(var e=0;e<n.length;e++){if(n.charCodeAt(e).toString(16).length>=3){t="UNICODE";break}}return t}function T(){var t,e,r=n("#input_content").val(),o=r.length;for(e=0;e<o;e++)if("0"!=(t=r.charAt(e))&&"1"!=t&&"2"!=t&&"3"!=t&&"4"!=t&&"5"!=t&&"6"!=t&&"7"!=t&&"8"!=t&&"9"!=t&&"#"!=t&&"*"!=t&&"+"!=t)return!1;return!0}function K(n){for(var t="",e=0;e<n.length;e++){var r=n.charCodeAt(e).toString(16);1==r.length?r="000"+r:2==r.length?r="00"+r:3==r.length&&(r="0"+r),t+=r}return t.toUpperCase()}function y(n){for(var t="",e=0;e<n.length;e++){var r=n.charCodeAt(e).toString(16);2==r.length?t+=r:1==r.length&&(t+="0"+r)}return t.toUpperCase()}function L(){var n=t.getSTKFlagInfo().stk_write_flag;"2"!=n&&"9"!=n&&(f=!1,hideLoading());var e,o,i=t.getSTKInfo().stk.toString();"ZEND"==i.toUpperCase()?e=i:(e=i.substr(0,i.indexOf(":")),o=i.substr(i.indexOf(":")+1));var u=t.getSTKMenuInfo().stk_menu.toString(),a=(u.substr(0,u.indexOf(":")),u.substr(u.indexOf(":")+1));"99"==n?O.STKInfo(0):"1"==n?O.STKInfo(1):"9"==n||"2"==n&&("#"==o||""==o)?(f||(f=!0,showLoading()),addTimeout(L,1e3)):"2"==n?"ZSMSR"==e&&(r(),O.menu_name_array_0(v(o)),O.STKInfo(5),hideLoading()):"3"==n?(d(a),r(),O.menu_name_array_0(l(s[0])),O.main_menu_infos(x),O.STKInfo(2)):"0"==n?"ZSTM"==e?(d(a),r(),O.menu_name_array_0(l(s[0])),O.main_menu_infos(x),O.STKInfo(2)):"ZDIST"==e||"ZFDIST"==e?(O.stkMessageText(g(o)),O.STKInfo(3)):"ZSTI"==e?(d(o),r(),"#"==s[0]?s[0]="":(O.menu_name_array_0(l(s[0])),O.main_menu_infos(x)),O.STKInfo(4)):"ZGINP"==e?(h(o),O.menu_name_array_0(_[0]),p(),b(),O.STKInfo(6)):"ZEND"==e&&(O.STKInfo(2),d(a),r(),O.menu_name_array_0(l(s[0])),O.main_menu_infos(x)):O.STKInfo(0)}var O=this;O.STKInfo=e.observable(),O.menu_name_array_0=e.observable(),O.stkMessageText=e.observable(),O.main_menu_infos=e.observableArray(),O.radio_select_submit_value=e.observable(""),O.child_menu_radio_value=e.observable("");var x=[];O.select_main_menu=function(n){page_num_submit=n.main_num_value,showLoading();var e={};e.operator="stk_menu",e.item_no=page_num_submit,t.setSTKMenuInfo(e,function(n){hideLoading(),"success"==n.result?L():errorOverlay()})},O.select_main_menu_radio=function(){if(""!=O.radio_select_submit_value()){showLoading();var n={};n.operator="stk_menu",n.item_no=O.radio_select_submit_value(),t.setSTKMenuInfo(n,function(n){hideLoading(),"success"==n.result?L():errorOverlay()})}},O.submit_text=function(){showLoading(),t.setSTKMenuInfo({operator:"stk_text"},function(n){hideLoading(),"success"==n.result?L():errorOverlay()})},O.back_submit_button=function(){showLoading(),n("#input_content").val(""),t.setSTKMenuInfo({operator:"stk_back"},function(n){hideLoading(),"success"==n.result?L():errorOverlay()})},O.select_menu_item=function(n){showLoading();var e={operator:"stk_menu_item",item_no:n.main_num_value};t.setSTKMenuInfo(e,function(n){hideLoading(),"success"==n.result?L():errorOverlay()})},O.select_main_item_radio=function(){if(""!=O.child_menu_radio_value()){showLoading();var n={operator:"stk_menu_item",item_no:O.child_menu_radio_value()};t.setSTKMenuInfo(n,function(n){hideLoading(),"success"==n.result?L():errorOverlay()})}},O.exit_submit_button=function(){showLoading(),t.setSTKMenuInfo({operator:"stk_exit"},function(n){hideLoading(),"success"==n.result?L():errorOverlay()})},O.submit_text_ZSMSR=function(){showLoading(),L()},window.stkUtil={input_apply:function(){var e=n("#input_content"),r=e.val();if(r.length<_[3])return alert(n.i18n.prop("input_too_short")),!1;if(r.length>_[2])return alert(n.i18n.prop("input_too_long")),!1;if(3==_[1])r=K(r);else if(2==_[1]){if(0==T())return alert(n.i18n.prop("form_number_wrong")),e.val(""),!1}else 0==_[1]&&(r=y(r));e.val(""),showLoading();var o={};return o.operator="stk_get_input",o.stk_content=r,o.stk_encode_type=_[1],t.setSTKMenuInfo(o,function(n){hideLoading(),"success"==n.result?L():errorOverlay()}),!0},input_update:function(){3==_[1]?S():2==_[1]&&T()}},function(){showLoading(),t.setSTKMenuInfo({operator:"stk_exit"},function(n){hideLoading(),"success"!=n.result&&errorOverlay()})}(),L()}function o(){var t=n("#container")[0];e.cleanNode(t);var o=new r;e.applyBindings(o,t)}var u,a=[],s=[],_=[],f=!1;return{init:o}});
//# sourceMappingURL=../../sourcemaps/stk/stk.js.map
