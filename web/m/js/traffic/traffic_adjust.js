define(["service","jquery","status_check"],function(t,e,n){function a(){var e=t.getTrafficAlertInfo();if("1"==(f=e.dataLimitTypeChecked)){var n=transUnit(parseInt(e.monthlySent,10)+parseInt(e.monthlyReceived,10),!1),a=i(n);h.val(fixLength(a.data,5)),g.val(r(a.unit)),l.show()}else{transSecond2Time(e.monthlyConnectedTime);v.val(o(e.monthlyConnectedTime));var u=fixLength(roundToTwoDecimalNumber(parseFloat(e.monthlyConnectedTime/3600)),5);e.monthlyConnectedTime/3600<1&&(u=fixLength(roundToTwoDecimalNumber(parseFloat(e.monthlyConnectedTime/60)),5)),m.val(u),d.show()}}function i(t){return{data:/\d+(.\d+)?/.exec(t)[0],unit:/[A-Z]{1,2}/.exec(t)[0]}}function r(t){return t=t.toUpperCase(),"GB"==t?"1024":"TB"==t?"1048576":"1"}function o(t){return t/3600<1?"1":"60"}function u(){d=e("#adjustByTime"),l=e("#adjustByData"),c=e("#frmAdjust"),m=e("#timeAdjust"),h=e("#dataAdjust"),g=e("#dataUnit"),v=e("#usedTimeUnit"),a(),e("#adjustSave").off("click").on("click",function(){c.submit()}),c.validate({submitHandler:function(){s()},rules:{timeAdjust:{range_data_usage:[0,1e4],point_data_usage:!0},dataAdjust:{range_data_usage:[0,1e4],point_data_usage:!0}}})}function s(){showLoading(),t.trafficCalibration({way:f,timeAdjust:Math.round(m.val()*v.val()*60),dataAdjust:Math.round(h.val()*g.val()*1024*1024)},function(t){"success"==t.result?(n.setTrafficAlertPopuped(!1),successOverlay()):errorOverlay()},function(t){errorOverlay()})}var d,l,c,f,m,h,g,v;return e.validator.addMethod("range_data_usage",function(t,e,n){return"."!=t.substring(t.length-1)&&"."!=t.substring(0,1)&&("0"!=t.substring(0,1)||1==t.length||1!=t.split(".").length)&&(this.optional(e)||t>=n[0]&&t<=n[1])}),e.validator.addMethod("point_data_usage",function(t,e,n){return!(t.split(".")[1]&&t.split(".")[1].length>2)}),{init:u}});
//# sourceMappingURL=../../../sourcemaps/m/traffic/traffic_adjust.js.map
