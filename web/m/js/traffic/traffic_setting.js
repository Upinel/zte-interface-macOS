define(["service","jquery","configPath","status_check"],function(a,t,e,i){function n(){f=t("#packageByTime"),g=t("#packageByData"),v=t("#packageType"),h=t("#packageTime"),d=t("#alertTimeReach"),p=t("#packageData"),m=t("#alertDataReach"),_=t("#dataUnit"),T=t("#alertTimeInfo"),k=t("#alertDataInfo"),b=t("#clear_date_input"),w=t("#trafficClear"),y=t("#clearDateTimeDiv"),w.off("change").on("change",function(){"on"==t(this).val()?y.show():y.hide()}),v.off("change").on("change",function(){"1"==t(this).val()?(g.show(),f.hide()):(g.hide(),f.show())}),t("#trafficBack").off("click").on("click",function(){e.isTrafficAlertSet?window.location.hash="#/traffic/view":window.location.hash="#/home"}),u(),r();var a=t("#frmTrafficSetting");t("#trafficSettingSave").off("click").on("click",function(){a.submit()}),a.validate({submitHandler:function(){c()},rules:{packageData:{range_data_usage2:[0,1e4],point_data_usage:!0},packageTime:{range_data_usage2:[0,1e4],point_data_usage:!0},alertDataReach:{digits:!0,range:[1,100]},alertTimeReach:{digits:!0,range:[1,100]},clear_date_input:{digits:!0,range:[1,31]}}})}function r(){h.off("keyup").on("keyup",function(){return o(),!0}),d.off("keyup").on("keyup",function(){return o(),!0}),p.off("keyup").on("keyup",function(){return l(),!0}),m.off("keyup").on("keyup",function(){return l(),!0}),_.off("change").on("change",function(){return l(),!0})}function o(){var a=roundToTwoDecimalNumber(h.val()*d.val()/100);isNaN(a)||0==a||"."==d.val().substring(0,1)||"0"==d.val().substring(0,1)||"."==d.val().substring(1,2)?T.hide():T.text(t.i18n.prop("alert_time_info",a)).show()}function l(){var a=roundToTwoDecimalNumber(p.val()*m.val()/100);isNaN(a)||0==a||"."==m.val().substring(0,1)||"0"==m.val().substring(0,1)||"."==m.val().substring(1,2)?k.hide():k.text(t.i18n.prop("alert_data_info",a+s(_.val()))).show()}function c(){showLoading(),a.setTrafficAlertInfo({dataLimitChecked:"1",dataLimitTypeChecked:v.val(),limitDataMonth:p.val()+"_"+_.val(),alertDataReach:m.val(),limitTimeMonth:h.val(),alertTimeReach:d.val(),wan_auto_clear_flow_data_switch:w.val(),traffic_clear_date:b.val()},function(a){"success"==a.result?(i.setTrafficAlertPopuped(!1),e.isTrafficAlertSet=!0,successOverlay()):errorOverlay()},function(a){errorOverlay()})}function u(){var e=a.getTrafficAlertInfo();v.val(e.dataLimitTypeChecked).trigger("change");var i=e.limitDataMonth.split("_");p.val(i[0]||0),_.val(i[1]||1),m.val(e.alertDataReach||0),h.val(e.limitTimeMonth||0),d.val(e.alertTimeReach||0),w.val(e.autoClearTraffic).trigger("change"),b.val(e.traffic_clear_date||0);var n=roundToTwoDecimalNumber(h.val()*d.val()/100);0==n||"."==d.val().substring(0,1)||"0"==d.val().substring(0,1)||"."==d.val().substring(1,2)?T.hide():T.text(t.i18n.prop("alert_time_info",n));var r=roundToTwoDecimalNumber(p.val()*m.val()/100);0==r||"."==m.val().substring(0,1)||"0"==m.val().substring(0,1)||"."==m.val().substring(1,2)?k.hide():k.text(t.i18n.prop("alert_data_info",r+s(_.val())))}function s(a){return"1024"==a?"GB":"1048576"==a?"TB":"MB"}var f,g,v,h,d,p,_,m,T,k,b,w,y;return t.validator.addMethod("range_data_usage",function(a,t,e){return"."!=a.substring(a.length-1)&&"."!=a.substring(0,1)&&("0"!=a.substring(0,1)||1==a.length||1!=a.split(".").length)&&(this.optional(t)||a>=e[0]&&a<=e[1])}),t.validator.addMethod("range_data_usage2",function(a,t,e){return"."!=a.substring(a.length-1)&&"."!=a.substring(0,1)&&(this.optional(t)||a>e[0]&&a<=e[1])}),t.validator.addMethod("point_data_usage",function(a,t,e){return!(a.split(".")[1]&&a.split(".")[1].length>2)}),{init:n}});
//# sourceMappingURL=../../../sourcemaps/m/traffic/traffic_setting.js.map
