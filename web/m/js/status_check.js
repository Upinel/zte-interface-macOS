define(["service","configPath"],function(e,n){function t(){window.setInterval(function(){i(e.getStatusInfo())},1e3)}function i(t){if("#/login"==window.location.hash)return!1;var i=n.AP_STATION_SUPPORT?e.getStatusInfo().ap_station_enable:"undefined";if(n.AP_STATION_SUPPORT&&(void 0===i||""===i))return e.refreshAPStationStatus({},$.noop()),!1;i=1==i;var o=$(".ui-popup-active:visible").length>0;if(!t.isLoggedIn||o||a&&u||!t.limitVolumeEnable||!i&&!checkConnectedStatus(t.connectStatus))return!1;if(s)return window.setTimeout(function(){s=!1},2e3),!1;var r=c(t);if(r.showConfirm&&(0==n.HAS_GDPR||"1"==t.privacy_read_flag)){var f=null;if(r.usedPercent>100&&!u?(a=u=!0,f={msg:"traffic_beyond_disconnect_msg"}):a||(a=!0,u=!1,f={msg:"traffic_limit_disconnect_msg",params:[r.limitPercent]}),null!=f){if(i&&"wifi_connected"==t.wan_connect_status||"no_connected"==t.wan_connect_status)return!1;showConfirm(f,function(){showLoading("disconnecting"),e.disconnect({},function(e){e.result?successOverlay():errorOverlay()})})}}return!0}function o(e){a=!!e,u=!!e,e||(s=!0)}function r(e){u=!!e,e||(s=!0)}function c(e){var n={showConfirm:!1,limitPercent:e.limitVolumePercent};if("1"==e.limitVolumeType){var t=parseInt(e.data_counter.monthlySent,10)+parseInt(e.data_counter.monthlyReceived,10);n.usedPercent=t/e.limitVolumeSize*100,n.usedPercent>n.limitPercent&&(n.showConfirm=!0,n.type="data")}else n.usedPercent=e.data_counter.monthlyConnectedTime/e.limitVolumeSize*100,n.usedPercent>n.limitPercent&&(n.showConfirm=!0,n.type="time");return n}var a=!1,u=!1,s=!1;return{init:t,setTrafficAlertPopuped:o,setTrafficAlert100Popuped:r}});
//# sourceMappingURL=../../sourcemaps/m/status_check.js.map
