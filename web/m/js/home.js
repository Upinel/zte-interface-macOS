define(["service","jquery","knockout","language","configPath"],function(e,t,n,o,i){function a(e,n,o){if("modem_sim_undetected"==n)return t.i18n.prop("sim_undetected_info");var i=e.toLowerCase();return""!=i&&"limited service"!=i&&"limited_service_sa"!=i||(i="limited_service"),"no service"==i&&(i="no_service"),"limited_service"==i||"no_service"==i?t.i18n.prop("network_type_"+i):-1!=t.inArray(e,A)||-1!=t.inArray(e,S)||"LTE-NSA"==e?"5G":-1!=t.inArray(e,y)&&o&&"LTE-NSA"!=e?"4G+":-1!=t.inArray(e,w)?"2G":-1!=t.inArray(e,h)?-1!=i.indexOf("dc")?"3G+":"3G":-1!=t.inArray(e,y)&&"LTE-NSA"!=e?"4G":e}function r(e,t,n,o,i,a,r){return"460"!=a||"20"!=r&&"24"!=r?""==t?o:(t=decodeMessage(t),"1"==e&&"1"==n?i?o:t==o?o:t+"  "+o:"1"==e?t==o?o:t+"  "+o:"1"==n?i?o:t:"0"==e&&"0"==n?i?t==o?o:t+"  "+o:t:""):"中国广电"}function s(){var n=e.getStatusInfo(),o=!!n.roamingStatus;P.setData("networkOperator",r(n.spn_b1_flag,n.spn_name_data,n.spn_b2_flag,n.networkOperator,o,n.rmcc,n.rmnc)),P.setData("network_type",a(n.networkType,n.simStatus,n.isCaStatus)),P.setData("roaming",n.roamingStatus?t.i18n.prop("roaming"):"");var s=P.getSignalCssClass(n.signalImg,n.networkType,n.simStatus);if(t("#signal_div").removeAttr("class").addClass(s),i.HAS_BATTERY){P.showElement("battery_div");var c=P.convertBatteryPers(n.battery_value,n.batteryStatus),_=t("img","#battery_div");_.attr("src")!=c&&_.attr("src",c)}else P.hideElement("battery_div");if(P.setData("speed_up",transUnit(n.data_counter.uploadRate||0,!0)),P.setData("speed_down",transUnit(n.data_counter.downloadRate||0,!0)),n.limitVolumeEnable){P.showElement("traffic_div"),P.showElement("1"==n.limitVolumeType?"traffic_data_div":"traffic_time_div");var l=parseInt(n.data_counter.monthlySent,10)+parseInt(n.data_counter.monthlyReceived,10);P.setData("data_used",t.i18n.prop("data_used",transUnit(l,!1))),P.setData("data_total",t.i18n.prop("data_total",transUnit(m.limitDataMonth,!1))),P.setData("time_used",t.i18n.prop("time_used",transSecond2Time(n.data_counter.monthlyConnectedTime))),P.setData("time_total",t.i18n.prop("time_total",m.limitTimeMonth/60/60))}else P.hideElement("traffic_div");P.setData("wireless_size",t.i18n.prop("n_wireless_devices",n.attachedDevices)),g?P.setData("sms_used",t.i18n.prop("sms_total_count",parseInt(v+n.smsUnreadCount,10))):(v=p-n.smsUnreadCount,P.setData("sms_used",t.i18n.prop("sms_total_count",p)),g=!0),0==n.smsUnreadCount?P.getEle("smsNewCount").hide():P.getEle("smsNewCount").text(n.smsUnreadCount).show(),n.new_version_state?t("#newVersionTips").show():t("#newVersionTips").hide()}function c(n){var o=n?"ota_update_success":"ota_update_failed";showAlert(o,function(){"OTA"==i.UPGRADE_TYPE&&e.clearUpdateResult({},t.noop())})}function _(){if("FOTA"==i.UPGRADE_TYPE||"OTA"==i.UPGRADE_TYPE){var t=e.getStatusInfo();!t.isLoggedIn||0!=i.HAS_GDPR&&"1"!=t.privacy_read_flag?window.setTimeout(_,1e3):e.getUpgradeResult({},function(e){"success"==e.upgrade_result?c(!0):"fail"==e.upgrade_result?c(!1):window.setTimeout(_,1e3)},function(){window.setTimeout(_,1e3)})}}function l(){var e=window.location.href;"modem_imsi_waitnck"==i.SIM_CARD_STATUS?window.location.hash="#/network_lock":window.location.href=e.slice(0,e.indexOf("?no_connect"))+"#/nosimcard"}function u(){var t=e.getStatusInfo(),n=window.location.href;-1!=window.location.href.indexOf("?no_connect")?"PPPOE"==t.opms_wan_mode||("AUTO"==t.opms_wan_mode||"AUTO_BACKUP"==t.opms_wan_mode)&&"AUTO_PPPOE"==t.opms_wan_auto_mode?showAlert("pppoe_error_jump_login",function(){l()}):"modem_init_complete"==t.simStatus?"0"==t.ppp_dial_conn_fail_counter||""==t.ppp_dial_conn_fail_counter?showAlert("no_connect_jump_login",function(){l()}):showAlert("connect_failed_jump_login",function(){l()}):"modem_sim_undetected"==t.simStatus?showAlert("no_simcard_jump",function(){l()}):"modem_sim_destroy"==t.simStatus||"modem_destroy"==t.simStatus?showAlert("invalid_simcard_jump",function(){l()}):"modem_imsi_waitnck"==t.simStatus||"modem_waitpin"==t.simStatus||"modem_waitpuk"==t.simStatus?showAlert("locked_simcard_jump_login",function(){l()}):showAlert("connect_failed_jump_login",function(){l()}):-1!=window.location.href.indexOf("?flow_beyond")?showAlert("flow_beyond_jump_login",function(){e.setRedirectOff(),window.location.href=n.slice(0,n.indexOf("?flow_beyond"))+(i.isTrafficAlertSet?"#/traffic/view":"#/traffic/traffic_setting")}):-1!=window.location.href.indexOf("?fota_upgrade")&&showAlert("fota_upgrade_jump_login",function(){e.setRedirectOff(),window.location.href=n.slice(0,n.indexOf("?fota_upgrade"))+"#/others/ota_update"})}function d(){var t=this,o=e.getParams({nv:["OOM_TEMP_PRO"]}).OOM_TEMP_PRO;t.oom_temp_pro=o,t.hasCar=i.HAS_CAR,t.hasGDPR=n.observable(i.HAS_GDPR)}function f(){var o=t("#container");n.cleanNode(o[0]);var a=new d;n.applyBindings(a,o[0]);var r=e.getLanguage();rd0=r.rd_params0,rd1=r.rd_params1,t("#logout").off("click").on("click",function(){showConfirm("confirm_logout",function(){manualLogout=!0,e.logout({},function(){window.location.reload()})})}),t("#trafficGo").off("click").on("click",function(){i.isTrafficAlertSet?window.location.hash="#/traffic/view":window.location.hash="#/traffic/traffic_setting"}),g=!1,m=e.getConnectionInfo(),e.getSmsCapability({},function(e){p=e.nvUsed}),addInterval(function(){m=e.getConnectionInfo(),s()},1e3),_(),t("#rejectBtn").off("click").on("click",function(){e.logout({},function(){window.location.reload()})}),t("#finishBtn").off("click").on("click",function(){var n={privacy_read_flag:"1"};e.setHaveReadPrivacyNote(n,function(e){e&&"success"==e.result&&(t("#privacy_policy").addClass("hide"),t("#privacy_policy").popup("close"),i.HAS_USER_IMPROVEMENT?(t("#user_improv").removeClass("hide"),t("#user_improv").popup("open")):u())})}),t("#isAllowedUserImprov").off("click").on("click",function(){t('label[for="isAllowedUserImprov"]').hasClass("ui-checkbox-on")?(t("#isAllowedUserImprov").attr("checked",!1),t('label[for="isAllowedUserImprov"]').addClass("ui-checkbox-off")):(t("#isAllowedUserImprov").attr("checked",!0),t('label[for="isAllowedUserImprov"]').addClass("ui-checkbox-on"))}),t("#confirmBtn").off("click").on("click",function(){var n={tr069_user_improv_flag:t('label[for="isAllowedUserImprov"]').hasClass("ui-checkbox-on")?"1":"0"};e.setUserImprovNote(n,function(e){e&&"success"==e.result&&(t("#user_improv").addClass("hide"),t("#user_improv").popup("close"),t("#user_grant").removeClass("hide"),t("#user_grant").popup("open"))})}),t("#userGrantRejectBtn").off("click").on("click",function(){var n={dm_user_grant_flag:"0"};e.setUserGrantNote(n,function(n){"1"==e.getParams({nv:["dm_user_grant_notify_flag"]}).dm_user_grant_notify_flag&&(t("#user_grant").addClass("hide"),t("#user_grant").popup("close"),u())})}),t("#userGrantAcceptBtn").off("click").on("click",function(){var n={dm_user_grant_flag:"1"};e.setUserGrantNote(n,function(n){"1"==e.getParams({nv:["dm_user_grant_notify_flag"]}).dm_user_grant_notify_flag&&(t("#user_grant").addClass("hide"),t("#user_grant").popup("close"),u())})}),setTimeout(function(){var n=e.getParams({nv:["privacy_read_flag","tr069_user_improv_notify_flag","dm_user_grant_notify_flag"]});"0"==n.privacy_read_flag&&i.HAS_GDPR?(t("#privacy_policy").removeClass("hide"),t("#privacy_policy").popup("open")):"0"==n.tr069_user_improv_notify_flag?(t("#user_improv").removeClass("hide"),t("#user_improv").popup("open")):"0"==n.dm_user_grant_notify_flag?(t("#user_grant").removeClass("hide"),t("#user_grant").popup("open")):u()},1e3),"zh-cn"==e.getLanguage().Language?t("#privacy_a").attr("href","https://www.ztedevices.com/cn/Privacy-Policy/ZTESmartRouterPrivacyPolicy"):t("#privacy_a").attr("href","https://www.ztedevices.com/en/Privacy-Policy/ZTESmartRouterPrivacyPolicy")}var m={},p=0,g=!1,v=0,w=["GSM","GPRS","EDGE"],h=["UMTS","HSDPA","HSUPA","HSPA","HSPA+","DC","DC-HSPA","DC-HSPA+","DC-HSDPA"],y=["LTE","LTE_CA","LTE_A","LTE-NSA"],A=["ENDC"],S=["SA"],P={cacheEle:{},getEle:function(e){return this.cacheEle.hasOwnProperty("id")?this.cacheEle[e]:(this.cacheEle[e]=t("#"+e),this.cacheEle[e])},setData:function(e,t){return this.getEle(e).html(t)},showElement:function(e){return this.getEle(e).show()},hideElement:function(e){return this.getEle(e).hide()},convertBatteryPers:function(e,t){var n=parseInt(e);return"0"==t?n>=0&&n<=5?"img/battery_out.png":n>5&&n<=25?"img/battery_one.png":n>25&&n<=50?"img/battery_two.png":n>50&&n<=90?"img/battery_three.png":"img/battery_full.png":"2"==t?"img/battery_full.png":n>=0&&n<=5?"img/battery_charging.gif":n>5&&n<=25?"img/battery_charging1.gif":n>25&&n<=50?"img/battery_charging2.gif":n>50&&n<=90?"img/battery_charging3.gif":"img/battery_full.png"},getSignalCssClass:function(e,t,n){return t=t.toLowerCase(),n=n?n.toLowerCase():"",""!=t&&"limited_service"!=t&&"no_service"!=t&&"limited service"!=t&&"no service"!=t&&"modem_init_complete"==n||(e="_none"),"signal"+e}};return{init:f}});
//# sourceMappingURL=../../sourcemaps/m/home.js.map
