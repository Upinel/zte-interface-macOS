define(["service","configPath"],function(e,o){function i(o){e.getCurrentlyAttachedDevicesInfo({},function(e){var i=_.map(e.attachedDevices,function(e,o){return e.hostName=t(e),e});m.empty(),m.append(l({devices:i})),m.enhanceWithin(),_.isFunction(o)&&o()})}function t(e){var o=_.find(v,function(o){return o.mac==e.macAddress});return o?o.hostname:e.hostName}function n(){d.popup("close",{transition:"pop"});var o=s.val();if(0==o.indexOf(" ")||o.lastIndexOf(" ")==o.length-1||/[\+;"\\]{1,32}/.test(o))return $("#popupEditName").popup("close"),void window.setTimeout(function(){showAlert("device_rename")},200);showLoading(),e.editHostName({hostname:s.val(),mac:f.val()},function(){e.getHostNameList({},function(e){v=e.devices,i(function(){hideLoading()})})},function(){errorOverlay()})}function p(){u=$("#rangeMode"),s=$("#newName"),f=$("#macAddress"),d=$("#popupEditName"),m=$("#attachedDevices"),l=_.template($("#devicesTmpl").html()),a(),v=e.getHostNameList({}).devices,i(),$("#frmName").validate({submitHandler:function(){n()}})}function a(){"CPE"==o.DEVICE_TYPE&&($.i18n.map.wifi_short_mode=$.i18n.prop("wifi_short_mode_cpe"),$.i18n.map.des_short_mode=$.i18n.prop("des_short_mode_cpe")),r=e.getWifiCoverageInfo().wifiRangeMode,$("#popupCoverage :radio[value="+r+"]").prop("checked",!0),u.text($.i18n.prop("des_"+r)),$("#coverageCancel").off("click").on("click",function(){$("#popupCoverage").popup("close"),setTimeout(function(){$("#popupCoverage :radio[value="+r+"]").prop("checked",!0),$("#popupCoverage :radio").checkboxradio("refresh")},100)}),$("#coverageOK").off("click").on("click",function(){var o=c();if("0"==o.wifiSwitch)return $("#popupCoverage").popup("close"),window.setTimeout(function(){showAlert("wps_wifi_off")},200),!0;if("1"==o.WpsStatus_1||"1"==o.WpsStatus_2)return $("#popupCoverage").popup("close"),window.setTimeout(function(){showAlert("wps_on_info")},200),!0;var i=$("#popupCoverage :checked").val();e.setWifiCoverageInfo({WiFiCoverage:i},function(){r=i,u.text($.i18n.prop("des_"+i)),$("#popupCoverage").popup("close")})})}function c(){var o,i=e.getWifiModuleSwitchStatus(),t=e.getWifiWpsStatus();return o=wifiWPSActiveInfo(t),o.wifiSwitch=i.WiFiModuleSwitch,o}var r,u,s,f,d,v,m,l;return window.devicesUtil={showEditNamePopup:function(e,o){s.val(e),f.val(o),$("#frmName span.error").remove(),d.popup("open",{transition:"pop"})}},{init:p}});
//# sourceMappingURL=../../../sourcemaps/m/wifi/view.js.map
